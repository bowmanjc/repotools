#!/bin/bash

##################################################################
#
#  RPM File Rename (rpm-name)
#
#  Jason Bowman (bowmanjc)
#  03 July 2022
#
#  Purpose: This bash script provides an easy tool to update
#           rpm package filenames based on the following info
#           embedded inside the rpm package:
#
#           <package>_<version>_<architecture>.rpm
#
#           Place this script in: /usr/local/bin/
#
#           Usage: rpm-name <arbitrary_rpm_filenames>
#
#           This script provides the same basic functionality as,
#           and is inspired by dpkg-name. While this script does
#           basic sanity checking against the incoming files,
#           it is recommended only to use against actual rpm
#           packages.
#
#  Dependencies: This script requires file & rpm in order to
#                execute.
#
#  License: GNU GPLv3
#
##################################################################

for rpmfile in "$@"
do
   if [[ $(file --mime-type -b "$rpmfile") == application/x-rpm ]]; then
      mv -vi $rpmfile $(rpm -qp --nosignature $rpmfile).rpm
   else
      echo "[!] Warning: $rpmfile is not an rpm package. Skipping."
   fi
done
exit 0
